#Experience

####From Apollo Planning Module

1. Apollo轨迹规划模块,以固定的频率进行,使用轨迹拼接的算法(Trajectory Stitching)保证相邻帧的轨迹再控制器看来是平滑的.假设我们的周期时间是dt秒,如果我们没有上一周期的轨迹,那就使用运动学模型,对当前从定位模块获得的车辆状态进行外推,获得dt时间之后的状态作为规划的起始点,apollo称之为重新规划;如果上一周期的轨迹存在，我们会根据当前系统时间T，在上一周期的轨迹中找到相对应的轨迹点，然后，我们进行一个比较，比较这个轨迹点与定位模块获得的当前车辆状态的差异，如果这个差异在一定范围内，我们找到T+dt时间的上一周期轨迹点作为规划起始点；如果这个差异超过设定范围，说明控制器有了较大的误差，我们会做第一种情况的replan。
2.Apollo Lattice需要通过变换指引线来实现较大幅度的超车或躲避障碍物

3.对于决策层和规划层之间出现相悖结论,如何处理?
规划层设计了反馈信号,反馈到决策层,通知决策层是否能实现所做的决定
4.Apollo 轨迹规划的起始条件之一是光滑的指引线,在Frenet坐标系下做规划，是为了避免直接考虑朝向，曲率等问题，避免在高维度上做规划。
5.设计上，em适合解决复杂的城市道路，lattice适合解决相对简单的高速场景。倒车的话，em和lattice是不能解决的
6.路径规划中，离散的s在0.5m以下，路径有200m长。好处在于我们获得了对路径更大的控制权，能够在非常复杂的问题中计算出可行轨迹

7.在实际使用过程中规划路径经常出现跳变，导致控制不稳定，这个和实际的实现有关系，合理的跳变表明对动态环境做出了反应；不合理的跳变说明在设计代价函数的时候有欠缺，需要改进设计